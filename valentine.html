<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Akshay ‚ù§Ô∏è Rishwi Forever Valentine</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --accent1: #ff6b8a;
      --accent2: #ff2d55;
      --yes-start: #34e89e;
      --yes-end: #0f9b0f;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
    html,body { height: 100%; }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #ffdde1 0%, #ee9ca7 35%, #ff758c 100%);
      overflow: hidden;
    }

    /* overlay for SVG hearts */
    .overlay { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }

    /* vertical float animation for hearts */
    @keyframes floatUp {
      0%   { transform: translateY(110vh) scale(0.45); opacity: 0; }
      8%   { opacity: 0.6; }
      50%  { transform: translateY(40vh) scale(1); opacity: 0.9; }
      92%  { opacity: 0.6; }
      100% { transform: translateY(-20vh) scale(1.05); opacity: 0; }
    }

    .container {
      position: relative; z-index: 2; text-align: center;
      padding: 30px 20px 44px; width: 92vw; max-width: 520px;
      background: rgba(255,255,255,0.18); border-radius: 20px; backdrop-filter: blur(12px);
      box-shadow: 0 18px 36px rgba(0,0,0,0.18); border: 1px solid rgba(255,255,255,0.35);
      display:flex; flex-direction:column; align-items:center;
    }

    .heart-box { position: relative; width: 60px; height: 60px; margin: 8px 0 14px; }
    .heart { position: absolute; width: 100%; height: 100%; background: var(--accent2); transform: rotate(-45deg); animation: heartbeat 1.2s infinite; }
    .heart::before, .heart::after { content:""; position:absolute; width:60px; height:60px; background:inherit; border-radius:50%; }
    .heart::before { top:-30px; left:0; } .heart::after { left:30px; top:0; }
    .crack { position:absolute; width:2px; height:50px; background:#333; left:29px; top:-10px; transform:rotate(45deg); opacity:0; }
    .bandaid { position:absolute; width:30px; height:10px; background:#e5c298; border:1px solid #c9a67a; opacity:0; }
    .b1{ top:0; left:10px; transform:rotate(-30deg); } .b2{ top:15px; left:-5px; transform:rotate(15deg); }
    .heart.broken{ animation:none; background:#777; } .heart.broken .crack{ opacity:0.8; }
    .heart.patched{ animation:none; } .heart.patched .bandaid{ opacity:1; }

    @keyframes heartbeat { 0%,100%{ transform:scale(1) rotate(-45deg);} 25%{ transform:scale(1.15) rotate(-45deg);} }

    h1{ font-size:1.6rem; margin-bottom:6px; text-shadow:0 2px 4px rgba(0,0,0,0.18); }
    .question{ font-size:1rem; margin-bottom:12px; color:#111; }
    .message{ min-height:48px; font-weight:700; margin:10px 0; line-height:1.3; }

    /* Buttons grid: two columns so scaling doesn't overlap neighbor */
    .buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      width: 100%;
      justify-items: center;
      align-items: end;
      min-height: 140px; /* reserve vertical space for scaling */
      padding-bottom: 6px;
    }

    .btn-wrap { width: 100%; display:flex; justify-content:center; align-items:center; }
    button {
      border: none;
      border-radius: 999px;
      padding: 12px 22px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .18s cubic-bezier(.2,.9,.2,1), box-shadow .18s ease;
      transform-origin: center center;
      z-index: 3;
      max-width: 220px;
      width: auto;
    }

    #yesBtn {
      background: linear-gradient(135deg, var(--yes-start), var(--yes-end));
      color: #fff;
      box-shadow: 0 6px 18px rgba(15,155,15,0.28);
    }
    #noBtn {
      background: #fff;
      color: var(--accent2);
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      position: relative;
    }

    /* stronger visual when scaled */
    .scaled { box-shadow: 0 12px 30px rgba(15,155,15,0.32); z-index: 6; }

    .pulse { animation: pulseHide 700ms ease forwards; }
    @keyframes pulseHide { 0%{ transform:scale(1); opacity:1 } 60%{ transform:scale(1.18); opacity:0.95 } 100%{ transform:scale(0.9); opacity:0 } }

    .footer-note{ font-size:.78rem; opacity:.85; margin-top:10px; }

    @media (prefers-reduced-motion: reduce) {
      .heart, .float-heart, button { animation: none !important; transition: none !important; }
    }

    button:focus { outline: 3px solid rgba(52,232,158,0.22); outline-offset: 3px; }
  </style>
</head>
<body>
  <div class="overlay" id="bgOverlay" aria-hidden="true"></div>

  <div class="container" role="main">
    <div class="heart-box" aria-hidden="true">
      <div class="heart" id="mainHeart">
        <div class="crack"></div>
        <div class="bandaid b1"></div>
        <div class="bandaid b2"></div>
      </div>
    </div>

    <h1>Hi Rishwi ‚ù§Ô∏è</h1>
    <p class="question">Will you be my <strong>forever</strong> Valentine?</p>

    <div class="buttons" aria-hidden="false">
      <div class="btn-wrap"><button id="yesBtn" aria-label="Yes, of course">Yes, of course üíò</button></div>
      <div class="btn-wrap"><button id="noBtn" aria-label="No">No üôà</button></div>
    </div>

    <p class="message" id="msg" aria-live="polite" aria-atomic="true"></p>
    <p class="footer-note">P.S. Saying "No" may cause cuteness overload.</p>
  </div>

  <!-- Audio -->
  <audio id="yesSound" preload="auto"><source src="https://actions.google.com/sounds/v1/cartoon/cheering_and_applause.ogg" type="audio/ogg"></audio>
  <audio id="noSound" preload="auto"><source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg"></audio>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const overlay = document.getElementById('bgOverlay');
      const yesBtn = document.getElementById('yesBtn');
      const noBtn = document.getElementById('noBtn');
      const msg = document.getElementById('msg');
      const heart = document.getElementById('mainHeart');
      const yesSound = document.getElementById('yesSound');
      const noSound = document.getElementById('noSound');

      // === CONFIG: change this number to increase/decrease heart density ===
      const HEART_COUNT = 600;
      // ===================================================================

      const noMessages = [
        "Excuse me? That must have been a typo. üòè",
        "Rude! Please read the question again. üíå",
        "Incorrect. Consult your heart and retry. ‚ù§Ô∏è",
        "System error: 'No' is not a valid response. ü§ñ",
        "Wow. Just wow. Luckily, I am patient. üòå",
        "I already told everyone you said 'Yes'..., dont make me a liar! üòÜ",
        "Arre bhagwan se to daro, hamaare chote se bache ka to socho üíï",
        "Nahi manogi? Fine! Now you have to catch me to say NO! üò§"
      ];
      let noClicks = 0;
      let runawayInterval = null;

      // segmented left positions to avoid clustering
      function generateSegmentedLefts(count) {
        const segments = Math.max(8, Math.floor(count / 6));
        const lefts = [];
        for (let s = 0; s < segments; s++) {
          const segStart = (s / segments) * 100;
          const segEnd = ((s + 1) / segments) * 100;
          const perSeg = Math.ceil(count / segments);
          for (let i = 0; i < perSeg && lefts.length < count; i++) {
            const pos = segStart + Math.random() * (segEnd - segStart);
            lefts.push(Math.min(98, Math.max(1, pos)));
          }
        }
        for (let i = lefts.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [lefts[i], lefts[j]] = [lefts[j], lefts[i]];
        }
        return lefts;
      }

      // create an SVG heart element
      function createSvgHeart(size, alpha) {
        const svgNS = "http://www.w3.org/2000/svg";
        const svg = document.createElementNS(svgNS, 'svg');
        svg.setAttribute('width', size);
        svg.setAttribute('height', size);
        svg.setAttribute('viewBox', '0 0 32 29');
        svg.style.display = 'block';
        svg.style.pointerEvents = 'none';
        const path = document.createElementNS(svgNS, 'path');
        path.setAttribute('d', 'M23.6 0c-2.7 0-5 1.6-6.6 3.9C15.4 1.6 13.1 0 10.4 0 4.7 0 0 4.7 0 10.4c0 7.6 9.6 12.9 16 18.6 6.4-5.7 16-11 16-18.6C32 4.7 27.3 0 21.6 0z');
        path.setAttribute('fill', `rgba(255,45,85,${alpha})`);
        svg.appendChild(path);
        return svg;
      }

      // append hearts as SVG elements to overlay
      function createFloatingHearts(count = 120) {
        const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
        const lefts = generateSegmentedLefts(count);
        for (let i = 0; i < count; i++) {
          const size = 6 + Math.random() * 28; // slightly smaller min size for density
          const alpha = 0.6 + Math.random() * 0.35;
          const svg = createSvgHeart(size, alpha);
          svg.style.position = 'absolute';
          svg.style.left = lefts[i] + 'vw';
          svg.style.top = (Math.random() * vh) + 'px';
          const dur = 6 + Math.random() * 8;
          const delay = Math.random() * -12;
          svg.style.animation = `floatUp ${dur}s linear ${delay}s infinite`;
          overlay.appendChild(svg);
        }
      }

      createFloatingHearts(HEART_COUNT);

      // helper to check overlap between two rects
      function rectsOverlap(r1, r2) {
        return !(r2.left > r1.right || r2.right < r1.left || r2.top > r1.bottom || r2.bottom < r1.top);
      }

      // move No button avoiding Yes button area
      function moveNoButtonRandomlyAvoidingYes() {
        const margin = 12;
        const btnW = noBtn.offsetWidth;
        const btnH = noBtn.offsetHeight;
        const maxX = Math.max(window.innerWidth - btnW - margin, margin);
        const maxY = Math.max(window.innerHeight - btnH - margin, margin);
        const yesRect = yesBtn.getBoundingClientRect();
        let attempts = 0;
        while (attempts < 30) {
          const x = Math.random() * maxX;
          const y = Math.random() * maxY;
          const candidateRect = { left: x, top: y, right: x + btnW, bottom: y + btnH };
          const padding = 18;
          const yesRectPadded = {
            left: yesRect.left - padding,
            top: yesRect.top - padding,
            right: yesRect.right + padding,
            bottom: yesRect.bottom + padding
          };
          if (!rectsOverlap(candidateRect, yesRectPadded)) {
            noBtn.style.position = 'fixed';
            noBtn.style.left = `${Math.max(margin, x)}px`;
            noBtn.style.top = `${Math.max(margin, y)}px`;
            noBtn.style.transition = 'all 0.18s ease-out';
            return;
          }
          attempts++;
        }
        noBtn.style.position = 'fixed';
        noBtn.style.left = `${margin}px`;
        noBtn.style.top = `${margin}px`;
        noBtn.style.transition = 'all 0.18s ease-out';
      }

      function startRunaway() {
        if (runawayInterval) return;
        moveNoButtonRandomlyAvoidingYes();
        runawayInterval = setInterval(moveNoButtonRandomlyAvoidingYes, 700);
      }
      function stopRunaway() {
        if (runawayInterval) { clearInterval(runawayInterval); runawayInterval = null; }
      }

      // No button behavior
      noBtn.addEventListener('click', () => {
        try { noSound.currentTime = 0; noSound.play().catch(()=>{}); } catch(e){}
        if (noClicks < noMessages.length) {
          noClicks++;
          heart.classList.remove('patched');
          heart.classList.add('broken');
          setTimeout(()=>{ heart.classList.remove('broken'); heart.classList.add('patched'); }, 600);
          setTimeout(()=>heart.classList.remove('patched'), 2200);

          msg.textContent = noMessages[noClicks - 1];
          yesBtn.style.transform = `scale(${Math.min(2.0, 1 + noClicks * 0.12)})`;
          yesBtn.classList.add('scaled');

          if (noClicks === noMessages.length) {
            noBtn.textContent = 'Catch me! üèÉ‚Äç‚ôÇÔ∏è';
            msg.textContent = 'Nahi manogi? Fine! Catch the button if you still want to say No! üò§';
            startRunaway();
          }
        } else {
          try { noSound.currentTime = 0; noSound.play().catch(()=>{}); } catch(e){}
          moveNoButtonRandomlyAvoidingYes();
        }
      });

      noBtn.addEventListener('mouseover', () => { if (noClicks >= noMessages.length) moveNoButtonRandomlyAvoidingYes(); });
      noBtn.addEventListener('touchstart', (e) => { if (noClicks >= noMessages.length) { e.preventDefault(); moveNoButtonRandomlyAvoidingYes(); } }, { passive:false });

      // Yes button behavior
      function handleYesAction() {
        stopRunaway();
        try { if (yesSound) { yesSound.currentTime = 0; yesSound.play().catch(()=>{}); } } catch(e){}
        msg.textContent = 'Yaaay! You are stuck with me forever! üíñ';
        yesBtn.textContent = 'Forever & ever üíç';
        yesBtn.style.transform = 'scale(1.08)';
        yesBtn.classList.add('scaled');

        if (noBtn && noBtn.style.display !== 'none') {
          noBtn.classList.add('pulse');
          setTimeout(()=>{ noBtn.style.display = 'none'; noBtn.classList.remove('pulse'); }, 700);
        }

        if (typeof confetti === 'function') confetti({ particleCount: 220, spread: 80, origin: { y: 0.6 } });
      }

      yesBtn.addEventListener('click', handleYesAction);
      yesBtn.addEventListener('touchstart', (e) => { e.preventDefault(); handleYesAction(); }, { passive:false });
      yesBtn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          handleYesAction();
        }
      });

      // keep runaway button inside viewport on resize
      window.addEventListener('resize', () => {
        if (noBtn.style.position === 'fixed') {
          const left = parseFloat(noBtn.style.left || 0);
          const top = parseFloat(noBtn.style.top || 0);
          const btnW = noBtn.offsetWidth;
          const btnH = noBtn.offsetHeight;
          const margin = 12;
          const maxX = Math.max(window.innerWidth - btnW - margin, margin);
          const maxY = Math.max(window.innerHeight - btnH - margin, margin);
          noBtn.style.left = Math.min(left, maxX) + 'px';
          noBtn.style.top = Math.min(top, maxY) + 'px';
        }
      });

      // initial state
      msg.textContent = '';
    });
  </script>
</body>
</html>